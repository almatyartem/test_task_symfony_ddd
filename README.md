# Тестовое задание (Payments Team)

## Описание задания
Мы ожидаем, что вы продемонстрируете умение применять принципы DDD (Domain-Driven Design) и следовать принципам Clean Architecture при проектировании кода. Код должен быть функциональным на базовом уровне, что позволит нам оценить ваше понимание принципов программирования, проектирования и качество написанного кода. Предполагаемое время выполнения: до 4 часов.

## Детали задачи
Необходимо разработать код для процесса выдачи кредита с реализацией следующих функций:

- Создание нового клиента.
- Проверка возможности выдачи кредита.
- Принятие решения о выдаче или отказе.
- Уведомление клиента о результате.

### Условия выдачи кредита:
- **Кредитный рейтинг клиента** должен быть выше 500.
- **Ежемесячный доход клиента** должен быть не менее $1000.
- **Возраст клиента** должен быть от 18 до 60 лет.
- Кредиты выдаются только в штатах **CA, NY, NV**.
    - Клиентам из штата **NY** отказ производится случайным образом.
    - Клиентам из штата **CA** процентная ставка увеличивается на 11.49%.

## Сущности

### Клиент
- Фамилия
- Имя
- Возраст
- SSN (социальный страховой номер)
- Адрес США (Адрес, Город, Штат, ZIP)
- Кредитный рейтинг FICO (число от 300 до 850)
- Email
- Номер телефона

### Продукт (Кредит)
- Название продукта
- Срок кредита
- Процентная ставка
- Сумма

## Сценарии
1. Создание нового клиента.
2. Изменение информации о существующем клиенте.
3. Предварительная проверка возможности выдачи кредита.
4. Выдача кредита:
    - Принятие решения о выдаче или отказе.
    - Уведомление клиента о результате через Email или SMS.

## Требования и ограничения
- Код должен быть размещен в **Git-репозитории** с предоставлением ссылки.
- Написание кода с использованием PHP версии 8+ и соблюдением стандартов **PSR**.
- Разрешено использование фреймворков **Yii2** или **Symfony**, а также написание кода без фреймворков.
- Приложение должно работать с любой базой данных или без использования базы данных. Допустимо возвращать данные статически, без операций записи, если это поможет сократить время реализации.
- Интерфейс взаимодействия с приложением может быть любым:
    - CLI
    - REST API
    - Веб-интерфейс (HTML)

## Преимущества
- Наличие тестов.
- Применение инструментов статического анализа.
- Использование Docker.


# Инструкция по запуску

## 1. Клонирование репозитория
Клонируйте репозиторий с помощью команды:
```bash
git clone https://github.com/almatyartem/test_task_symfony_ddd
```

## 2. Сборка Docker-образа
Соберите Docker-образ, выполнив команду:
```bash
docker build -t loan-issuer .
```

## 3. Запуск контейнера
Запустите контейнер с использованием следующей команды:
```bash
docker run -p 8000:8000 -v $(pwd):/app --name loan-issuer loan-issuer
```

## 4. Запуск консольного приложения
Для запуска консольного приложения выполните команду:
```bash
docker exec -it loan-issuer php bin/console app:ui
```

## 5. Дополнительные команды
### Запуск PHPStan (опционально)
Анализируйте код с помощью PHPStan:
```bash
vendor/bin/phpstan analyse
```

### Запуск тестов (опционально)
Запустите тесты с использованием PHPUnit:
```bash
vendor/bin/phpunit --testdox
```

